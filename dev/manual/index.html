<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Manual · QuakeML.jl documentation</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">QuakeML.jl documentation</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Manual</a><ul class="internal"><li><a class="tocitem" href="#Preamble-1"><span>Preamble</span></a></li><li><a class="tocitem" href="#Reading-1"><span>Reading</span></a></li><li><a class="tocitem" href="#Writing-1"><span>Writing</span></a></li><li><a class="tocitem" href="#Accessing-fields-1"><span>Accessing fields</span></a></li></ul></li><li><a class="tocitem" href="../function-index/">Function index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Manual</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Manual</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/anowacki/QuakeML.jl/blob/master/docs/src/manual.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="User-manual-1"><a class="docs-heading-anchor" href="#User-manual-1">User manual</a><a class="docs-heading-anchor-permalink" href="#User-manual-1" title="Permalink"></a></h1><p>This section describes how to use QuakeML.jl to read and write QuakeML files, and how to create objects which describe sets of seismic events.</p><h2 id="Preamble-1"><a class="docs-heading-anchor" href="#Preamble-1">Preamble</a><a class="docs-heading-anchor-permalink" href="#Preamble-1" title="Permalink"></a></h2><p>The following examples all assume that you have first used the module like so:</p><pre><code class="language-julia-repl">julia&gt; using QuakeML</code></pre><h3 id="Namespace-issues-1"><a class="docs-heading-anchor" href="#Namespace-issues-1">Namespace issues</a><a class="docs-heading-anchor-permalink" href="#Namespace-issues-1" title="Permalink"></a></h3><p>QuakeML.jl deliberately does not export the types it uses by default, since their names follow those in the QuakeML specification, and they are quite generic to seismic processing—for example, <code>Event</code> and <code>Phase</code>. The recommended way to interact with QuakeML.jl in the REPL or in your own packages is to always use the module name (or an alias of it).</p><p>For instance, to define an empty set of events, which are held in the type <a href="../function-index/#QuakeML.EventParameters"><code>EventParameters</code></a>, you would write</p><pre><code class="language-julia-repl">julia&gt; events = QuakeML.EventParameters()
EventParameters
  comment: Array{QuakeML.Comment}((0,))
  event: Array{QuakeML.Event}((0,))
  description: Missing missing
  creation_info: Missing missing
  public_id: QuakeML.ResourceIdentifier</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>If you <em>really</em> want to bring the QuakeML.jl types into scope without manually importing them, then there is an option.  You can do <code>using QuakeML.Types</code>.  Note that this API is not yet stable and use of the <code>Types</code> module is recommended only for interactive use or throwaway scripts.</p></div></div><h3 id="Important-types-1"><a class="docs-heading-anchor" href="#Important-types-1">Important types</a><a class="docs-heading-anchor-permalink" href="#Important-types-1" title="Permalink"></a></h3><p>For a full list of QuakeML types, see <a href="../function-index/#Types-1">Types</a>.  The following are a few of the most important when defining one&#39;s own catalogues.</p><ul><li><a href="../function-index/#QuakeML.EventParameters"><code>EventParameters</code></a> is the root type, and contains one or more <code>Event</code>s.</li><li>An <a href="../function-index/#QuakeML.Event"><code>Event</code></a> defines a known single source of seismic energy, which may contain one or several</li><li><a href="../function-index/#QuakeML.Origin"><code>Origin</code></a>s.  Each <code>Origin</code> is one interpretation of the data, potentially containing information about the source location, origin time, focal mechanism, magnitude, and so on.</li></ul><p>The types in this package are directly named after those in the QuakeML specification.  Similarly, the fields of each type are named to match the names of the attributes and elements of each QuakeML type. Note however that rather than use <a href="https://en.wikipedia.org/wiki/Camel_case">camel case</a> <code>likeThis</code> for these field names, in this package we use <a href="https://en.wikipedia.org/wiki/Snake_case">snake case</a> <code>like_this</code>. Therefore translating between the XML and QuakeML.jl representations of things in the specification should be simple.</p><h3 id="Sample-data-1"><a class="docs-heading-anchor" href="#Sample-data-1">Sample data</a><a class="docs-heading-anchor-permalink" href="#Sample-data-1" title="Permalink"></a></h3><p>QuakeML.jl comes with a few sample data sets.  To access these, you can define the path to them using the <code>pathof</code> function from <code>Base</code>.  We will call this path <code>data_dir</code>:</p><pre><code class="language-julia-repl">julia&gt; data_dir = joinpath(dirname(dirname(pathof(QuakeML))), &quot;test&quot;, &quot;data&quot;)
&quot;/home/travis/build/anowacki/QuakeML.jl/test/data&quot;</code></pre><h2 id="Reading-1"><a class="docs-heading-anchor" href="#Reading-1">Reading</a><a class="docs-heading-anchor-permalink" href="#Reading-1" title="Permalink"></a></h2><h3 id="On-disk-data-1"><a class="docs-heading-anchor" href="#On-disk-data-1">On-disk data</a><a class="docs-heading-anchor-permalink" href="#On-disk-data-1" title="Permalink"></a></h3><p>To read a set of events from disk, one simply calls <a href="../function-index/#QuakeML.read-Tuple{AbstractString}"><code>QuakeML.read</code></a>:</p><pre><code class="language-julia-repl">julia&gt; nepal_event = QuakeML.read(joinpath(data_dir, &quot;nepal_mw7.2.qml&quot;))
EventParameters
  comment: Array{QuakeML.Comment}((0,))
  event: Array{QuakeML.Event}((1,))
  description: Missing missing
  creation_info: QuakeML.CreationInfo
  public_id: QuakeML.ResourceIdentifier</code></pre><h3 id="Strings-1"><a class="docs-heading-anchor" href="#Strings-1">Strings</a><a class="docs-heading-anchor-permalink" href="#Strings-1" title="Permalink"></a></h3><p>To read from a <code>String</code> which contains QuakeML, you use <a href="../function-index/#QuakeML.readstring"><code>QuakeML.readstring</code></a>:</p><pre><code class="language-julia-repl">julia&gt; qml_string = &quot;&quot;&quot;
                  &lt;?xml version=&quot;1.0&quot;?&gt;
                  &lt;quakeml xmlns=&quot;http://quakeml.org/xmlns/quakeml/1.2&quot;&gt;
                      &lt;eventParameters publicID=&quot;smi:local/events/XXX&quot;&gt;
                          &lt;event publicID=&quot;smi:local/event/A&quot;&gt;
                          &lt;/event&gt;
                      &lt;/eventParameters&gt;
                  &lt;/quakeml&gt;
                  &quot;&quot;&quot;;

julia&gt; events = QuakeML.readstring(qml_string)
EventParameters
  comment: Array{QuakeML.Comment}((0,))
  event: Array{QuakeML.Event}((1,))
  description: Missing missing
  creation_info: Missing missing
  public_id: QuakeML.ResourceIdentifier</code></pre><h2 id="Writing-1"><a class="docs-heading-anchor" href="#Writing-1">Writing</a><a class="docs-heading-anchor-permalink" href="#Writing-1" title="Permalink"></a></h2><h3 id="Writing-to-disk-or-subtype-of-IO-1"><a class="docs-heading-anchor" href="#Writing-to-disk-or-subtype-of-IO-1">Writing to disk or subtype of <code>IO</code></a><a class="docs-heading-anchor-permalink" href="#Writing-to-disk-or-subtype-of-IO-1" title="Permalink"></a></h3><p>To write a set of events to a file on disk, call <a href="../function-index/#Base.write-Tuple{IO,EventParameters}"><code>write(io, events)</code></a>.</p><pre><code class="language-julia-repl">julia&gt; write(&quot;nepal.xml&quot;, nepal_event)</code></pre><p>You can easily verify that the file written is identical to the one we read:</p><pre><code class="language-julia-repl">julia&gt; QuakeML.read(&quot;nepal.xml&quot;) == nepal_event
true</code></pre><h3 id="Converting-to-a-string-1"><a class="docs-heading-anchor" href="#Converting-to-a-string-1">Converting to a string</a><a class="docs-heading-anchor-permalink" href="#Converting-to-a-string-1" title="Permalink"></a></h3><p>To convert a set of events into a <code>String</code> for subsequent processing, first convert the <code>EventParameters</code> object into an XML document, then call <code>string</code>:</p><pre><code class="language-julia-repl">julia&gt; string2 = string(quakeml(events))
&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;\n&lt;quakeml xmlns=\&quot;http://quakeml.org/xmlns/quakeml/1.2\&quot;&gt;&lt;eventParameters publicID=\&quot;smi:local/events/XXX\&quot;&gt;&lt;event publicID=\&quot;smi:local/event/A\&quot;/&gt;&lt;/eventParameters&gt;&lt;/quakeml&gt;\n&quot;</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>One could also create a <code>Base.IOBuffer</code> and <code>write</code> to that directly.</p></div></div><h3 id="Converting-to-an-in-memory-XML-document-1"><a class="docs-heading-anchor" href="#Converting-to-an-in-memory-XML-document-1">Converting to an in-memory XML document</a><a class="docs-heading-anchor-permalink" href="#Converting-to-an-in-memory-XML-document-1" title="Permalink"></a></h3><p>Internally, QuakeML.jl uses <a href="https://github.com/bicycle1885/EzXML.jl">EzXML.jl</a> to parse XML strings and create XML objects from <code>EventParameters</code>. If you are happy to use EzXML, you can create an XML document (an <code>EzXML.Document</code>) by calling <a href="../function-index/#QuakeML.quakeml"><code>quakeml</code></a> on an <code>EventParameters</code> object.</p><pre><code class="language-julia-repl">julia&gt; xml = quakeml(nepal_event)
EzXML.Document(EzXML.Node(&lt;DOCUMENT_NODE@0x000000000400f750&gt;))

julia&gt; typeof(xml)
EzXML.Document</code></pre><h2 id="Accessing-fields-1"><a class="docs-heading-anchor" href="#Accessing-fields-1">Accessing fields</a><a class="docs-heading-anchor-permalink" href="#Accessing-fields-1" title="Permalink"></a></h2><p>In QuakeML.jl, all fields of types are publicly-accessible and part of the API.  It is intended that users will directly access and manipulate these fields.  Where restrictions on fields exist (for instance, where strings can be only a certain number of characters long, or can only consist of certain characters), these are enforced both upon construction of types and when changing fields (via <code>setproperty!</code>).</p><p>For example, to get the coordinate of the Nepal event we read in earlier, you access the fields directly:</p><pre><code class="language-julia-repl">julia&gt; nepal_event.event[1]
QuakeML.Event
  description: Array{QuakeML.EventDescription}((1,))
  comment: Array{QuakeML.Comment}((0,))
  focal_mechanism: Array{QuakeML.FocalMechanism}((1,))
  amplitude: Array{QuakeML.Amplitude}((0,))
  magnitude: Array{QuakeML.Magnitude}((1,))
  station_magnitude: Array{QuakeML.StationMagnitude}((0,))
  origin: Array{QuakeML.Origin}((2,))
  pick: Array{QuakeML.Pick}((0,))
  preferred_origin_id: QuakeML.ResourceIdentifier
  preferred_magnitude_id: Missing missing
  preferred_focal_mechanism_id: QuakeML.ResourceIdentifier
  type: QuakeML.EventType
  type_certainty: Missing missing
  creation_info: Missing missing
  public_id: QuakeML.ResourceIdentifier</code></pre><p>This returns the first <code>Event</code> in the <code>event</code> field.  <code>event</code> is a <code>Vector{Event}</code>, and may be empty.</p><p>In QuakeML, any <code>Event</code> may have several <code>Origin</code>s.  Each <code>Origin</code> describes a unique onset time and location of the event.  Usually, one of these origins is the &#39;preferred&#39; origin.  Typically, one uses <a href="../function-index/#QuakeML.preferred_origin"><code>preferred_origin</code></a> to return this and then uses the origin parameters within the particular <code>Origin</code>.</p><pre><code class="language-julia-repl">julia&gt; o = preferred_origin(nepal_event.event[1])
QuakeML.Origin
  composite_time: Array{QuakeML.CompositeTime}((0,))
  comment: Array{QuakeML.Comment}((0,))
  origin_uncertainty: Array{QuakeML.OriginUncertainty}((0,))
  arrival: Array{QuakeML.Arrival}((0,))
  time: QuakeML.TimeQuantity
  longitude: QuakeML.RealQuantity
  latitude: QuakeML.RealQuantity
  depth: QuakeML.RealQuantity
  depth_type: Missing missing
  time_fixed: Bool false
  epicenter_fixed: Bool false
  reference_system_id: Missing missing
  method_id: Missing missing
  earth_model_id: Missing missing
  quality: Missing missing
  type: Missing missing
  region: Missing missing
  evaluation_mode: Missing missing
  evaluation_status: Missing missing
  creation_info: Missing missing
  public_id: QuakeML.ResourceIdentifier

julia&gt; lon, lat = o.longitude.value, o.latitude.value
(86.08, 27.67)</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Note that the longitude and latitude of an <code>Origin</code> are <a href="../function-index/#QuakeML.RealQuantity"><code>QuakeML.RealQuantity</code></a>s.  As well as the <code>value</code> field which contains the nominal value of the quantity, they can also contain uncertainties.  Hence in this case, we needed to access the actual value of longitude like <code>o.longitude.value</code>, and similarly for latitude.</p></div></div><p>Almost all types (apart from <a href="../function-index/#Enumerated-types-1">Enumerated types</a>) are <code>mutable struct</code>s, which means that their fields can be changed after construction. Almost all types have at least one field which is optional.  In QuakeML.jl, these can either take a concrete value, or <code>missing</code>. Hence setting any optional field to <code>missing</code> (like <code>origin.depth = missing</code>) will remove that value.</p><p>Where multiple values of a field are allowed (such as the <code>origin</code> field of an <code>Event</code>), these are represented by <code>Vector</code>s, and can be empty.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../function-index/">Function index »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Wednesday 15 April 2020 08:03">Wednesday 15 April 2020</span>. Using Julia version 1.4.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
